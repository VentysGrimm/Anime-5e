<form class="{{cssClass}} flexcol monster" autocomplete="off">
    {{!-- Sheet Header --}}
    <header class="sheet-header">
        <div class="profile-section">
            <img class="profile-img" src="{{actor.img}}" data-edit="img" title="{{actor.name}}"/>
            <h1 class="monstername">
                <input name="name" type="text" value="{{actor.name}}" placeholder="Monster Name"/>
            </h1>
        </div>
        <div class="monster-info">
            <div class="info-group">
                <label>Type</label>
                <select name="system.type" data-type="String">
                    {{#select system.type}}
                    <option value="aberration">Aberration</option>
                    <option value="beast">Beast</option>
                    <option value="celestial">Celestial</option>
                    <option value="construct">Construct</option>
                    <option value="dragon">Dragon</option>
                    <option value="elemental">Elemental</option>
                    <option value="fey">Fey</option>
                    <option value="fiend">Fiend</option>
                    <option value="giant">Giant</option>
                    <option value="humanoid">Humanoid</option>
                    <option value="monstrosity">Monstrosity</option>
                    <option value="ooze">Ooze</option>
                    <option value="plant">Plant</option>
                    <option value="undead">Undead</option>
                    {{/select}}
                </select>
            </div>
            <div class="info-group">
                <label>Size</label>
                <select name="system.size" data-type="String">
                    {{#select system.size}}
                    <option value="tiny">Tiny</option>
                    <option value="small">Small</option>
                    <option value="medium">Medium</option>
                    <option value="large">Large</option>
                    <option value="huge">Huge</option>
                    <option value="gargantuan">Gargantuan</option>
                    {{/select}}
                </select>
            </div>
            <div class="info-group">
                <label>Challenge Rating</label>
                <select name="system.cr" data-type="Number">
                    {{#select system.cr}}
                    <option value="0">0 (0 XP)</option>
                    <option value="0.125">1/8 (25 XP)</option>
                    <option value="0.25">1/4 (50 XP)</option>
                    <option value="0.5">1/2 (100 XP)</option>
                    <option value="1">1 (200 XP)</option>
                    <option value="2">2 (450 XP)</option>
                    <option value="3">3 (700 XP)</option>
                    <option value="4">4 (1,100 XP)</option>
                    <option value="5">5 (1,800 XP)</option>
                    <option value="6">6 (2,300 XP)</option>
                    <option value="7">7 (2,900 XP)</option>
                    <option value="8">8 (3,900 XP)</option>
                    <option value="9">9 (5,000 XP)</option>
                    <option value="10">10 (5,900 XP)</option>
                    {{/select}}
                </select>
            </div>
            <div class="info-group">
                <label>Allegiance</label>
                <select name="system.allegiance" data-type="String">
                    {{#select system.allegiance}}
                    <option value="hostile">Hostile</option>
                    <option value="neutral">Neutral</option>
                    <option value="friendly">Friendly</option>
                    {{/select}}
                </select>
            </div>
        </div>
    </header>

    {{!-- Resource Bars --}}
    <div class="resources-grid">
        <div class="resource-box">
            <label>Hit Points</label>
            <div class="resource-content flexrow flex-center flex-between">
                <input type="number" name="system.hp.value" value="{{system.hp.value}}"/>
                <span>/</span>
                <input type="number" name="system.hp.max" value="{{system.hp.max}}"/>
            </div>
            <div class="hit-dice">
                <label>Hit Dice</label>
                <input type="text" name="system.hitDice" value="{{system.hitDice}}" placeholder="e.g. 3d8+6"/>
            </div>
        </div>
        <div class="resource-box">
            <label>Magic Points</label>
            <div class="resource-content flexrow flex-center flex-between">
                <input type="number" name="system.mp.value" value="{{system.mp.value}}"/>
                <span>/</span>
                <input type="number" name="system.mp.max" value="{{system.mp.max}}"/>
            </div>
        </div>
        <div class="resource-box">
            <label>Energy Points</label>
            <div class="resource-content flexrow flex-center flex-between">
                <input type="number" name="system.energy.value" value="{{system.energy.value}}"/>
                <span>/</span>
                <input type="number" name="system.energy.max" value="{{system.energy.max}}"/>
            </div>
        </div>
    </div>

    {{!-- Navigation --}}
    <nav class="sheet-navigation">
        <a class="item" data-tab="stats">
            <i class="fas fa-chart-bar"></i> Stats
        </a>
        <a class="item" data-tab="features">
            <i class="fas fa-star"></i> Features
        </a>
        <a class="item" data-tab="attacks">
            <i class="fas fa-fist-raised"></i> Attacks
        </a>
        <a class="item" data-tab="spells">
            <i class="fas fa-magic"></i> Spells
        </a>
        <a class="item" data-tab="description">
            <i class="fas fa-book-open"></i> Description
        </a>
    </nav>

    {{!-- Sheet Body --}}
    <section class="sheet-body">
        {{!-- Stats Tab --}}
        <div class="tab stats" data-group="primary" data-tab="stats">
            {{!-- Abilities --}}
            <div class="section-header">
                <span>Abilities</span>
            </div>
            <div class="abilities-grid">
                {{#each system.abilities as |ability key|}}
                <div class="ability-box">
                    <label for="system.abilities.{{key}}.value" class="resource-label rollable">{{key}}</label>
                    <input type="number" name="system.abilities.{{key}}.value" value="{{ability.value}}" data-dtype="Number"/>
                    <span class="ability-mod">({{numberFormat ability.mod decimals=0 sign=true}})</span>
                </div>
                {{/each}}
            </div>

            {{!-- Defenses --}}
            <div class="section-header">
                <span>Defenses</span>
            </div>
            <div class="defenses-grid">
                <div class="defense-box">
                    <label>Armor Class</label>
                    <div class="flexrow">
                        <input type="number" name="system.ac.value" value="{{system.ac.value}}" data-dtype="Number"/>
                        <input type="text" name="system.ac.type" value="{{system.ac.type}}" placeholder="Type (e.g. Natural Armor)"/>
                    </div>
                </div>
                <div class="defense-box">
                    <label>Saving Throws</label>
                    <div class="saves-list">
                        {{#each system.saves as |save key|}}
                        <div class="save-item">
                            <label>{{key}}</label>
                            <input type="number" name="system.saves.{{key}}.value" value="{{save.value}}" data-dtype="Number"/>
                            <input type="checkbox" name="system.saves.{{key}}.proficient" {{checked save.proficient}}/>
                        </div>
                        {{/each}}
                    </div>
                </div>
            </div>

            {{!-- Movement --}}
            <div class="section-header">
                <span>Movement</span>
            </div>
            <div class="movement-grid">
                <div class="speed-types">
                    <div class="speed-item">
                        <label>Walk</label>
                        <input type="number" name="system.speed.walk" value="{{system.speed.walk}}" data-dtype="Number"/>
                    </div>
                    <div class="speed-item">
                        <label>Fly</label>
                        <input type="number" name="system.speed.fly" value="{{system.speed.fly}}" data-dtype="Number"/>
                    </div>
                    <div class="speed-item">
                        <label>Swim</label>
                        <input type="number" name="system.speed.swim" value="{{system.speed.swim}}" data-dtype="Number"/>
                    </div>
                    <div class="speed-item">
                        <label>Climb</label>
                        <input type="number" name="system.speed.climb" value="{{system.speed.climb}}" data-dtype="Number"/>
                    </div>
                </div>
            </div>
        </div>

        {{!-- Features Tab --}}
        <div class="tab features" data-group="primary" data-tab="features">
            <div class="features-list">
                {{#each system.features as |feature id|}}
                <div class="feature-item" data-feature-id="{{id}}">
                    <div class="feature-header">
                        <input type="text" name="system.features.{{id}}.name" value="{{feature.name}}" placeholder="Feature Name"/>
                        <div class="feature-controls">
                            <a class="feature-control feature-edit"><i class="fas fa-edit"></i></a>
                            <a class="feature-control feature-delete"><i class="fas fa-trash"></i></a>
                        </div>
                    </div>
                    <textarea name="system.features.{{id}}.description" placeholder="Feature description">{{feature.description}}</textarea>
                </div>
                {{/each}}
                <button type="button" class="add-feature">
                    <i class="fas fa-plus"></i> Add Feature
                </button>
            </div>
        </div>

        {{!-- Attacks Tab --}}
        <div class="tab attacks" data-group="primary" data-tab="attacks">
            <div class="attacks-list">
                {{#each system.attacks as |attack id|}}
                <div class="attack-item" data-attack-id="{{id}}">
                    <div class="attack-header">
                        <input type="text" name="system.attacks.{{id}}.name" value="{{attack.name}}" placeholder="Attack Name"/>
                        <div class="attack-controls">
                            <a class="attack-control attack-edit"><i class="fas fa-edit"></i></a>
                            <a class="attack-control attack-delete"><i class="fas fa-trash"></i></a>
                        </div>
                    </div>
                    <div class="attack-stats">
                        <div class="attack-stat">
                            <label>Attack Bonus</label>
                            <input type="number" name="system.attacks.{{id}}.bonus" value="{{attack.bonus}}"/>
                        </div>
                        <div class="attack-stat">
                            <label>Damage</label>
                            <input type="text" name="system.attacks.{{id}}.damage" value="{{attack.damage}}" placeholder="e.g. 2d6+3"/>
                        </div>
                        <div class="attack-stat">
                            <label>Type</label>
                            <input type="text" name="system.attacks.{{id}}.type" value="{{attack.type}}" placeholder="e.g. Slashing"/>
                        </div>
                    </div>
                    <textarea name="system.attacks.{{id}}.description" placeholder="Special effects or additional notes">{{attack.description}}</textarea>
                </div>
                {{/each}}
                <button type="button" class="add-attack">
                    <i class="fas fa-plus"></i> Add Attack
                </button>
            </div>
        </div>

        {{!-- Spells Tab --}}
        <div class="tab spells" data-group="primary" data-tab="spells">
            <div class="spells-list">
                {{#each system.spells as |spell id|}}
                <div class="spell-item" data-spell-id="{{id}}">
                    <div class="spell-header">
                        <input type="text" name="system.spells.{{id}}.name" value="{{spell.name}}" placeholder="Spell Name"/>
                        <div class="spell-controls">
                            <a class="spell-control spell-edit"><i class="fas fa-edit"></i></a>
                            <a class="spell-control spell-delete"><i class="fas fa-trash"></i></a>
                        </div>
                    </div>
                    <div class="spell-stats">
                        <div class="spell-stat">
                            <label>MP Cost</label>
                            <input type="number" name="system.spells.{{id}}.mpCost" value="{{spell.mpCost}}"/>
                        </div>
                        <div class="spell-stat">
                            <label>Range</label>
                            <input type="text" name="system.spells.{{id}}.range" value="{{spell.range}}" placeholder="e.g. 30 feet"/>
                        </div>
                        <div class="spell-stat">
                            <label>Duration</label>
                            <input type="text" name="system.spells.{{id}}.duration" value="{{spell.duration}}" placeholder="e.g. 1 minute"/>
                        </div>
                    </div>
                    <textarea name="system.spells.{{id}}.description" placeholder="Spell description and effects">{{spell.description}}</textarea>
                </div>
                {{/each}}
                <button type="button" class="add-spell">
                    <i class="fas fa-plus"></i> Add Spell
                </button>
            </div>
        </div>

        {{!-- Description Tab --}}
        <div class="tab description" data-group="primary" data-tab="description">
            <div class="editor">
                {{editor content=system.description target="system.description" button=true owner=owner editable=editable}}
            </div>
        </div>
    </section>
</form> 